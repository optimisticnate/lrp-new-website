// ============================================================================
// LAKE RIDE PROS - PAYLOAD CMS CUSTOM STYLES
// ============================================================================
// This file fixes inconsistent color usage in Payload admin panel
// Root cause: Payload's default focus state uses --theme-success-500
// which appears green in our custom theme, creating visual confusion
// ============================================================================

@import '~@payloadcms/ui/scss';

@layer payload {
  // ==========================================================================
  // 1. FIX FOCUS STATES (ROOT CAUSE)
  // ==========================================================================
  // Override Payload's $focus-box-shadow which uses var(--theme-success-500)
  // Focus should use LRP brand green and be distinct from error states
  
  :root {
    --lrp-green: #4cbb17;        // Primary brand green
    --lrp-green-light: #60e421;  // Light accent
    --lrp-green-dark: #3a8e11;   // Dark shade
    --focus-color: #4cbb17;      // Use brand green for focus
  }
  
  input:focus,
  textarea:focus,
  select:focus,
  button:focus-visible,
  .input:focus {
    outline: 0;
    box-shadow: 0 0 0 2px var(--lrp-green);
    border-color: var(--lrp-green);
  }
  
  // ==========================================================================
  // 2. FIX VALIDATION ERROR STATES
  // ==========================================================================
  // Invalid fields MUST use red (--color-error-*), not green
  
  .field--error,
  .field[data-error='true'],
  .render-fields > .field.error {
    input,
    textarea,
    select,
    .input {
      border-color: var(--color-error-500);
      background-color: var(--color-error-50);
      
      &:focus {
        box-shadow: 0 0 0 2px var(--color-error-500);
        border-color: var(--color-error-600);
      }
    }
    
    .field-label,
    .label {
      color: var(--color-error-600);
    }
  }
  
  .field-error,
  .field-error-message {
    color: var(--color-error-600);
    background-color: var(--color-error-50);
    border-color: var(--color-error-300);
  }
  
  // ==========================================================================
  // 3. FIX MODAL DESTRUCTIVE ACTIONS
  // ==========================================================================
  // Delete/confirm buttons should be red, cancel should be neutral
  
  .btn--style-danger,
  [data-style='danger'],
  .popup__button-group .btn--style-primary[aria-label*='confirm'],
  .popup__button-group .btn--style-primary:last-child {
    --color: white;
    --bg-color: var(--color-error-500);
    --hover-bg: var(--color-error-600);
    --box-shadow: none;
    
    background-color: var(--bg-color);
    color: var(--color);
    border: none;
    
    &:hover {
      background-color: var(--hover-bg);
      color: white;
    }
  }
  
  .popup__button-group .btn--style-secondary,
  .popup__button-group .btn:first-child {
    --color: var(--theme-text);
    --bg-color: transparent;
    --box-shadow: inset 0 0 0 1px var(--theme-elevation-400);
    --hover-color: var(--theme-text);
    --hover-box-shadow: inset 0 0 0 1px var(--theme-elevation-600);
  }
  
  // ==========================================================================
  // 4. FIX TOAST NOTIFICATIONS
  // ==========================================================================
  // Success toasts should be subtle, errors prominent
  
  .Toastify__toast--success,
  .toast--success {
    background-color: var(--theme-elevation-50);
    border: 1px solid var(--theme-elevation-200);
    border-left: 4px solid var(--color-success-500);
    color: var(--theme-text);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  }
  
  .Toastify__toast--error,
  .toast--error {
    background-color: var(--color-error-50);
    border: 1px solid var(--color-error-200);
    border-left: 4px solid var(--color-error-500);
    color: var(--theme-text);
  }
  
  .Toastify__toast--warning,
  .toast--warning {
    background-color: var(--color-warning-50);
    border: 1px solid var(--color-warning-200);
    border-left: 4px solid var(--color-warning-500);
    color: var(--theme-text);
  }
  
  // ==========================================================================
  // 5. FIX CHECKBOX/SELECTION STATES
  // ==========================================================================
  
  input[type='checkbox']:checked,
  .checkbox input:checked {
    background-color: var(--lrp-green);
    border-color: var(--lrp-green-dark);
    
    &:focus {
      box-shadow: 0 0 0 2px var(--lrp-green);
    }
  }
  
  .row--selected,
  .table__row--selected,
  tr[aria-selected='true'] {
    background-color: rgba(76, 187, 23, 0.08); // LRP green tint
  }
  
  .collection__list-item--selected,
  .list-item[aria-selected='true'] {
    background-color: rgba(76, 187, 23, 0.05);
    border-color: var(--lrp-green);
  }
  
  // ==========================================================================
  // 6. ENSURE VALID FIELDS REMAIN NEUTRAL
  // ==========================================================================
  // Valid fields should NOT be highlighted green
  
  .field:not(.field--error):not([data-error='true']) {
    input:not(:focus),
    textarea:not(:focus),
    select:not(:focus) {
      border-color: var(--theme-elevation-150);
      background-color: var(--theme-input-bg);
    }
  }
}

// ============================================================================
// DARK MODE (Payload handles automatically via CSS variables)
// ============================================================================

@media (prefers-color-scheme: dark) {
  @layer payload {
    // Add dark mode overrides here if needed
    // Most cases: Payload's CSS variables handle this automatically
  }
}
